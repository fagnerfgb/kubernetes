apiVersion: batch/v1
kind: CronJob
metadata:
  name: sorteador-cron
spec:
    schedule: "*/1 * * * * "
    successfulJobsHistoryLimit: 3
    failedJobsHistoryLimit: 3
    suspend: false
    concurrencyPolicy: Replace
    jobTemplate:
      spec:
        ttlSecondsAfterFinished: 60
        completions: 2
        parallelism: 2
        backoffLimit: 10
        template:
          metadata:
            labels:
              app: sorteador
          spec:
            containers:
            - name: sorteador
              image: fabricioveronez/sorteador:v1
              env:
                - name: NUM_ESCOLHIDO
                  value: "2"
                - name: NUM_MAXIMO
                  value: "4"
                - name: DELAY_SORTEIO
                  value: "60"
            restartPolicy: Never
